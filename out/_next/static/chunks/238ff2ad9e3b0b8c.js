(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},658,e=>{"use strict";var t=e.i(64397);let r={credentials:"include"};async function a(e){let t=e.headers.get("content-type")?.includes("application/json")?await e.json():null;if(!e.ok){if(t&&(422===e.status||409===e.status)){let e=Error(t.error||t.message||"Validation failed");throw e.errors=t.errors,e}let r=t&&(t.error||t.message)||e.statusText;throw Error(`API Error ${e.status}: ${r}`)}return t.data}e.s(["centerService",0,{getCenters:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/centers`,{...r,headers:(0,t.getHeaders)()});return a(e)}catch(e){return console.error("Error fetching centers:",e),[]}},getCenterById:async e=>a(await fetch(`${t.API_BASE_URL}/centers/${e}`,{...r,headers:(0,t.getHeaders)()})),createCenter:async e=>a(await fetch(`${t.API_BASE_URL}/centers`,{method:"POST",...r,headers:(0,t.getHeaders)(),body:JSON.stringify(e)})),updateCenter:async(e,s)=>a(await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"PUT",...r,headers:(0,t.getHeaders)(),body:JSON.stringify(s)})),deleteCenter:async e=>{let a=await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"DELETE",...r,headers:(0,t.getHeaders)()});if(!a.ok){let e=a.headers.get("content-type")?.includes("application/json")?await a.json():null,t=e&&e.message||a.statusText;throw Error(`Delete failed ${a.status}: ${t}`)}},approveCenter:async e=>a(await fetch(`${t.API_BASE_URL}/centers/${e}/approve`,{method:"PATCH",...r,headers:(0,t.getHeaders)()})),rejectCenter:async(e,a)=>{let s=await fetch(`${t.API_BASE_URL}/centers/${e}/reject`,{method:"POST",...r,headers:(0,t.getHeaders)(),body:JSON.stringify({rejection_reason:a})});if(!s.ok){let e=s.headers.get("content-type")?.includes("application/json")?await s.json():null,t=e&&e.message||s.statusText;throw Error(`Rejection failed ${s.status}: ${t}`)}},toggleCenterStatus:async(e,s)=>{let o="active"===s.toLowerCase()?"disabled":"active";return a(await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"PUT",...r,headers:(0,t.getHeaders)(),body:JSON.stringify({status:o})}))}}])},38533,e=>{"use strict";var t=e.i(64397);e.s(["loanService",0,{getLoans:async e=>{let r=new URLSearchParams;e.search&&r.append("search",e.search),e.status&&r.append("status",e.status),e.page&&r.append("page",e.page.toString()),e.per_page&&r.append("per_page",e.per_page.toString());let a=await fetch(`${t.API_BASE_URL}/loans?${r.toString()}`,{headers:(0,t.getHeaders)()}),s=await a.json();if(!a.ok)throw Error(s.message||"Failed to fetch loans");return s},createLoan:async e=>{let r=await fetch(`${t.API_BASE_URL}/loans`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await r.json();if(!r.ok){let e=a.message||"Failed to submit loan application";if(a.errors){let t=Object.values(a.errors).flat().join(", ");e+=`: ${t}`}throw Error(e)}return a.data},getLoanById:async e=>{let r=await fetch(`${t.API_BASE_URL}/loans/${e}`,{headers:(0,t.getHeaders)()}),a=await r.json();if(!r.ok)throw Error(a.message||"Failed to fetch loan details");return a.data},approveLoan:async(e,r,a)=>{let s=await fetch(`${t.API_BASE_URL}/loans/${e}/approve`,{method:"PATCH",headers:(0,t.getHeaders)(),body:JSON.stringify({action:r,reason:a})}),o=await s.json();if(!s.ok)throw Error(o.message||"Failed to approve loan");return o.data},exportLoans:async()=>{let e=await fetch(`${t.API_BASE_URL}/loans/export`,{headers:(0,t.getHeaders)()});if(!e.ok)throw Error((await e.json().catch(()=>({}))).message||"Failed to export loans");let r=await e.blob(),a=window.URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`loans_export_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)},importLoans:async e=>{let r=new FormData;r.append("file",e);let a=await fetch(`${t.API_BASE_URL}/loans/import`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:r}),s=await a.json();if(!a.ok)throw Error(s.message||"Failed to import loans");return s}}])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},93845,e=>{"use strict";var t=e.i(64397);let r={getUsers:async(e="admins")=>{try{let r="admins"===e?`${t.API_BASE_URL}/admins`:`${t.API_BASE_URL}/users`,a=await fetch(r,{headers:(0,t.getHeaders)()});if(!a.ok)return[];let s=await a.json(),o=[];return s?.data?.items&&Array.isArray(s.data.items)?o=s.data.items:s?.data&&Array.isArray(s.data)?o=s.data:s?.data?.data&&Array.isArray(s.data.data)?o=s.data.data:Array.isArray(s)&&(o=s),o.map(e=>({id:e.id,name:e.full_name||e.user_name||e.name||e.email,staffId:e.user_name&&/^ST\d+/.test(e.user_name)?e.user_name:void 0,email:e.email,role:e.roles&&e.roles.length>0?e.roles[0].display_name||e.roles[0].name:e.role||"N/A",branch:e.branch?.name||(e.branch_id?"Branch "+e.branch_id:"-"),branchId:e.branch_id||null,status:e.is_active||"Active"===e.status||1===e.status?"Active":"Inactive",is_locked:e.is_locked||!1,locked_until:e.locked_until||null,today_session:e.today_session||null}))}catch(e){return console.error("Error fetching users",e),[]}},getStaffList:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/staffs`,{headers:(0,t.getHeaders)()});if(!e.ok)return[];return(await e.json()).data||[]}catch(e){return console.error("Error fetching staff list",e),[]}},getStaffDropdownList:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/staffs/list`,{headers:(0,t.getHeaders)()});if(!e.ok)return[];return(await e.json()).data||[]}catch(e){return console.error("Error fetching staff dropdown list",e),[]}},getWitnessCandidates:async()=>{try{let e=["manager","field_officer","staff"].map(e=>fetch(`${t.API_BASE_URL}/staffs/by-role/${e}`,{headers:(0,t.getHeaders)()}).then(e=>e.ok?e.json():{data:[]}).catch(()=>({data:[]}))),r=await Promise.all(e),a=[],s=new Set;return r.forEach(e=>{e.data&&Array.isArray(e.data)&&e.data.forEach(e=>{e.staff_id&&!s.has(e.staff_id)&&(s.add(e.staff_id),a.push({staff_id:e.staff_id,full_name:e.full_name||e.name,email_id:e.email_id||""}))})}),a}catch(e){return console.error("Error fetching witness candidates",e),[]}},getPermissions:async()=>[{module:"Dashboard",view:!0,create:!0,edit:!0,delete:!1},{module:"Customers",view:!0,create:!0,edit:!0,delete:!1},{module:"Loans",view:!0,create:!0,edit:!0,delete:!1},{module:"Collections",view:!0,create:!0,edit:!1,delete:!1},{module:"Reports",view:!0,create:!1,edit:!1,delete:!1},{module:"Finance",view:!0,create:!0,edit:!0,delete:!0},{module:"Shareholders",view:!0,create:!0,edit:!0,delete:!0},{module:"System Config",view:!0,create:!0,edit:!0,delete:!0}],createAdmin:async e=>{let r=await fetch(`${t.API_BASE_URL}/admins`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await r.json();if(!r.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to create admin");return a},createUser:async e=>{let a=e.role?.toLowerCase()||"";if(a.includes("admin")||"super_admin"===a)return r.createAdmin(e);if(e.staffDetails){let r=await fetch(`${t.API_BASE_URL}/staffs`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e.staffDetails)}),a=await r.json();if(!r.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to create staff");return a}let s={user_name:e.name?e.name.replace(/\s+/g,"").toLowerCase()+Math.floor(1e3*Math.random()):e.email.split("@")[0],email:e.email,password:e.password,password_confirmation:e.password,is_active:!0,roles:[parseInt(e.roleId)]},o=await fetch(`${t.API_BASE_URL}/users`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(s)}),n=await o.json();if(!o.ok)throw Error(n.errors?Object.values(n.errors).flat().join(", "):n.message||`Failed to create ${a}`);return n},getAllRoles:async()=>{let e=await fetch(`${t.API_BASE_URL}/roles/all`,{headers:(0,t.getHeaders)()});if(!e.ok)throw console.error(`Error fetching roles: ${e.status} ${e.statusText}`),Error(`Failed to fetch roles: ${e.status} ${e.statusText}`);return(await e.json()).data},updateUser:async(e,r)=>{let a=r.role?.toLowerCase()||"";if(r.staffDetails&&r.staffId){let e=await fetch(`${t.API_BASE_URL}/staffs/${r.staffId}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(r.staffDetails)}),a=await e.json();if(!e.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to update staff");return a}let s=a.includes("admin")||a.includes("super")?`${t.API_BASE_URL}/admins/${e}`:`${t.API_BASE_URL}/users/${e}`,o=await fetch(s,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(r)}),n=await o.json();if(!o.ok)throw Error(n.errors?Object.values(n.errors).flat().join(", "):n.message||"Failed to update user");return n},getStaffDetails:async e=>{let r=await fetch(`${t.API_BASE_URL}/staffs/${e}`,{headers:(0,t.getHeaders)()});return r.ok?(await r.json()).data:null},deleteUser:async e=>{let r=await fetch(`${t.API_BASE_URL}/users/${e}`,{method:"DELETE",headers:(0,t.getHeaders)()});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Failed to delete user")}};e.s(["staffService",0,r])},20431,e=>{"use strict";var t=e.i(64397);e.s(["loanProductService",0,{getLoanProducts:async e=>{try{let r=new URLSearchParams;e&&Object.entries(e).forEach(([e,t])=>{null!=t&&r.append(e,t.toString())});let a=r.toString(),s=`${t.API_BASE_URL}/loan-products${a?`?${a}`:""}`,o=await fetch(s,{headers:(0,t.getHeaders)()});if(!o.ok)return console.error(`Failed to fetch loan products: ${o.statusText}`),[];return(await o.json()).data||[]}catch(e){return console.error("Error in getLoanProducts:",e),[]}},filterLoanProducts:async e=>{try{let r=new URLSearchParams;Object.entries(e).forEach(([e,t])=>{null!=t&&r.append(e,t.toString())});let a=await fetch(`${t.API_BASE_URL}/loan-products/filter?${r.toString()}`,{headers:(0,t.getHeaders)()});if(!a.ok)throw Error(`Failed to filter loan products: ${a.statusText}`);return(await a.json()).data}catch(e){throw console.error("Error in filterLoanProducts:",e),e}},getLoanProductById:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/loan-products/${e}`,{headers:(0,t.getHeaders)()});if(!r.ok)throw Error(`Failed to fetch loan product details: ${r.statusText}`);return(await r.json()).data}catch(e){throw console.error("Error in getLoanProductById:",e),e}},createLoanProduct:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/loan-products`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await r.json();if(!r.ok){if(422===r.status){let e=a.message||"Validation failed",t=Error(e);throw t.errors=a.errors,t}throw Error(a.message||"Failed to create loan product")}return a.data}catch(e){throw console.error("Error in createLoanProduct:",e),e}},updateLoanProduct:async(e,r)=>{try{let a=await fetch(`${t.API_BASE_URL}/loan-products/${e}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(r)}),s=await a.json();if(!a.ok){if(422===a.status){let e=s.message||"Validation failed",t=Error(e);throw t.errors=s.errors,t}throw Error(s.message||"Failed to update loan product")}return s.data}catch(e){throw console.error("Error in updateLoanProduct:",e),e}},deleteLoanProduct:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/loan-products/${e}`,{method:"DELETE",headers:(0,t.getHeaders)()});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.message||"Failed to delete loan product")}}catch(e){throw console.error("Error in deleteLoanProduct:",e),e}},getLoanProductsByCustomerId:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/loan-products/customer/${e}`,{headers:(0,t.getHeaders)()});if(!r.ok)throw Error(`Failed to fetch customer loan products: ${r.statusText}`);return(await r.json()).data}catch(e){throw console.error("Error in getLoanProductsByCustomerId:",e),e}},approveLoanProduct:async(e,r)=>{try{let a=await fetch(`${t.API_BASE_URL}/loan-products/${e}/approve`,{method:"PATCH",headers:(0,t.getHeaders)(),body:JSON.stringify({action:r})}),s=await a.json();if(!a.ok)throw Error(s.message||"Failed to process loan action");return s.data}catch(e){throw console.error("Error in approveLoanProduct:",e),e}}}])},34102,e=>{"use strict";let t=e=>Number(e.processingFee||0)+Number(e.documentationFee||0)+Number(e.insuranceFee||0);e.s(["calculateNetDisbursement",0,e=>Number(e.loanAmount||0)-t(e),"calculateTotalFees",0,t,"extractGenderFromNIC",0,e=>{let t=e.toUpperCase().trim(),r=0;if(/^(\d{9})[VX]$/.test(t))r=parseInt(t.substring(2,5));else{if(!/^(\d{12})$/.test(t))return null;r=parseInt(t.substring(4,7))}return r>500?"Female":"Male"},"formatCurrency",0,e=>`LKR ${e.toLocaleString()}`,"generateDraftName",0,(e,t,r)=>e?.displayName||(t?`NIC ${t}`:r||"Untitled draft"),"isValidNIC",0,e=>/^([0-9]{9}[x|X|v|V]|[0-9]{12})$/.test(e.trim())])},67276,e=>{"use strict";var t=e.i(43476),r=e.i(69638);e.s(["ProgressSteps",0,({steps:e,currentStep:a,onStepClick:s})=>(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:e.map((o,n)=>{let i=!!s,d=a>=o.number,c=a===o.number;return(0,t.jsxs)("div",{className:"flex items-center flex-1 last:flex-none",children:[(0,t.jsxs)("div",{className:`flex items-center gap-3 group ${i?"cursor-pointer":""}`,onClick:()=>i&&s(o.number),children:[(0,t.jsx)("div",{className:`w-11 h-11 rounded-2xl flex items-center justify-center transition-all duration-300 ${d?"bg-blue-600 text-white shadow-xl shadow-blue-100 ring-4 ring-blue-50":"bg-gray-100 text-gray-400 group-hover:bg-gray-200"} ${c?"scale-110":""}`,children:a>o.number?(0,t.jsx)(r.CheckCircle,{className:"w-6 h-6"}):(0,t.jsx)("div",{className:"transition-transform group-hover:scale-110",children:o.icon})}),(0,t.jsxs)("div",{className:"hidden lg:block",children:[(0,t.jsx)("p",{className:`text-[13px] font-black uppercase tracking-wider transition-colors ${d?"text-gray-900":"text-gray-400"}`,children:o.title}),(0,t.jsx)("p",{className:`text-[10px] font-bold transition-colors ${d?"text-blue-500":"text-gray-400"}`,children:o.description})]})]}),n<e.length-1&&(0,t.jsx)("div",{className:`flex-1 h-1 mx-6 rounded-full transition-all duration-500 ${a>o.number?"bg-blue-600 shadow-[0_0_10px_rgba(37,99,235,0.3)]":"bg-gray-100"}`})]},o.number)})})})])},25859,e=>{"use strict";var t=e.i(64397);e.s(["customerService",0,{getCustomers:async e=>{try{let r=new URLSearchParams;e?.full_name&&r.append("full_name",e.full_name),e?.customer_code&&r.append("customer_code",e.customer_code),e?.gender&&r.append("gender",e.gender),e?.center_id&&r.append("center_id",e.center_id),e?.branch_id&&r.append("branch_id",e.branch_id),e?.grp_id&&r.append("grp_id",e.grp_id);let a=r.toString(),s=`${t.API_BASE_URL}/customers${a?`?${a}`:""}`,o=await fetch(s,{headers:(0,t.getHeaders)()});if(!o.ok)return[];let n=await o.json();if(n?.data&&Array.isArray(n.data))return n.data;return[]}catch(e){return console.error("Error fetching customers",e),[]}},getConstants:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/customers/constants`,{headers:(0,t.getHeaders)()});if(!e.ok)return null;return(await e.json()).data||null}catch(e){return console.error("Error fetching customer constants",e),null}},getCustomer:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/customers/${e}`,{headers:(0,t.getHeaders)()});if(!r.ok)return null;return(await r.json()).data||null}catch(e){return console.error("Error fetching customer",e),null}},createCustomer:async e=>{let r=await fetch(`${t.API_BASE_URL}/customers`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await r.json();if(!r.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to create customer");return a},updateCustomer:async(e,r)=>{let a=await fetch(`${t.API_BASE_URL}/customers/${e}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(r)}),s=await a.json();if(!a.ok)throw Error(s.errors?Object.values(s.errors).flat().join(", "):s.message||"Failed to update customer");return s},deleteCustomer:async e=>{let r=await fetch(`${t.API_BASE_URL}/customers/${e}`,{method:"DELETE",headers:(0,t.getHeaders)()}),a=await r.json();if(!r.ok)throw Error(a.message||"Failed to delete customer");return a},importCustomers:async e=>{let r=new FormData;r.append("file",e);let a=await fetch(`${t.API_BASE_URL}/customers/import`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:r}),s=await a.json();if(!a.ok)throw Error(s.message||"Failed to import customers");return s},exportCustomers:async()=>{let e=await fetch(`${t.API_BASE_URL}/customers/export`,{headers:(0,t.getHeaders)()});if(!e.ok)throw Error((await e.json().catch(()=>({}))).message||"Failed to export customers");let r=await e.blob(),a=window.URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`customers_export_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)},checkTransferEligibility:async e=>{try{let r=await fetch(`${t.API_BASE_URL}/customers/${e}/transfer-eligibility`,{headers:(0,t.getHeaders)()}),a=await r.json();return{eligible:r.ok,message:a.message}}catch(e){return console.error("Error checking transfer eligibility",e),{eligible:!1,message:"Could not verify eligibility"}}}}])},27331,e=>{"use strict";let t=["Completed","Rejected"];e.s(["LOAN_CLOSED_STATUSES",0,t,"LOAN_STATUS_APPROVED",0,"approved","LOAN_STATUS_PENDING_1ST",0,"pending_1st","LOAN_STATUS_PENDING_2ND",0,"pending_2nd","LOAN_STATUS_SENT_BACK",0,"sent_back","isLoanClosed",0,e=>t.includes(e)])},60087,e=>{"use strict";var t=e.i(64397);let r=async e=>{let t=await e.json();if(!e.ok){if(t&&(422===e.status||409===e.status)){let e=Error(t.error||t.message||"Validation failed");throw e.errors=t.errors,e}throw Error(t.error||t.message||"Request failed")}return t};e.s(["groupService",0,{getGroups:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/groups`,{headers:(0,t.getHeaders)()});return(await r(e)).data||[]}catch(e){return console.error("Failed to fetch groups:",e),[]}},getGroupById:async e=>{try{let a=await fetch(`${t.API_BASE_URL}/groups/${e}`,{headers:(0,t.getHeaders)()});return(await r(a)).data}catch(e){throw console.error("Failed to fetch group:",e),e}},createGroup:async e=>{try{let a=await fetch(`${t.API_BASE_URL}/groups`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)});return(await r(a)).data}catch(e){throw console.error("Failed to create group:",e),e}},updateGroup:async(e,a)=>{try{let s=await fetch(`${t.API_BASE_URL}/groups/${e}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(a)});return(await r(s)).data}catch(e){throw console.error("Failed to update group:",e),e}},deleteGroup:async e=>{try{let a=await fetch(`${t.API_BASE_URL}/groups/${e}`,{method:"DELETE",headers:(0,t.getHeaders)()});await r(a)}catch(e){throw console.error("Failed to delete group:",e),e}},toggleGroupStatus:async(e,a)=>{let s="active"===a.toLowerCase()?"inactive":"active";try{let a=await fetch(`${t.API_BASE_URL}/groups/${e}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify({status:s})});return(await r(a)).data}catch(e){throw console.error("Failed to update group status:",e),e}}}])}]);