(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75007,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(78583);let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var n=e.i(84614),l=e.i(12426),i=e.i(69074),o=e.i(27331),d=e.i(658),c=e.i(60087),u=e.i(25859),m=e.i(20431),x=e.i(93845),g=e.i(42365);let p={center:"",group:"",customer:"",nic:"",loanProduct:"",loanAmount:"",requestedAmount:"",interestRate:"",rentalType:"Weekly",tenure:"",processingFee:"",documentationFee:"",insuranceFee:"",remarks:"",status:"draft",guardian_nic:"",guardian_name:"",guardian_address:"",guardian_phone:"",guarantor1_name:"",guarantor1_nic:"",guarantor2_name:"",guarantor2_nic:"",witness1_id:"",witness2_id:""},h="loanCreationDraftList",b=["Weekly","Bi-Weekly","Monthly"],f=["Customer Photo","NIC Copy","Address Proof","Income Proof","Bank Statement","Application Form"];var j=e.i(34102),N=e.i(38533),y=e.i(67276),v=e.i(63059),_=e.i(73375),C=e.i(69638);let w=({currentStep:e,totalSteps:a,onNext:r,onPrevious:t,onSubmit:n})=>{let l=e===a;return(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsxs)("button",{onClick:t,disabled:1===e,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(_.ChevronLeft,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Previous"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",e," of ",a]}),l?(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[(0,s.jsx)(C.CheckCircle,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Submit for Approval"})]}):(0,s.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Next"}),(0,s.jsx)(v.ChevronRight,{className:"w-4 h-4"})]})]})},S=({isOpen:e,drafts:a,onClose:r,onLoad:t,onDelete:n})=>e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"Saved Drafts"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Select a draft to continue"})]}),(0,s.jsx)("button",{onClick:r,className:"text-sm text-gray-500 hover:text-gray-700",children:"Close"})]}),(0,s.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto divide-y divide-gray-100",children:[0===a.length&&(0,s.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"No drafts saved yet."}),a.map(e=>(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[new Date(e.savedAt).toLocaleString()," â€¢ Step ",e.currentStep||1]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>t(e.id),className:"px-3 py-1 text-xs bg-blue-50 text-blue-700 border border-blue-200 rounded hover:bg-blue-100",children:"Load"}),(0,s.jsx)("button",{onClick:()=>n(e.id),className:"px-3 py-1 text-xs bg-red-50 text-red-700 border border-red-200 rounded hover:bg-red-100",children:"Delete"})]})]},e.id))]})]})}):null;var k=e.i(70319);let A=({formData:e,centers:a,groups:r,filteredCustomers:t,selectedCustomerRecord:n,onNicChange:l,onCenterChange:i,onGroupChange:o,onCustomerChange:d,onFieldChange:c,staffs:u,isAutoFilling:m=!1})=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Customer"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Search by NIC"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:e.nic,onChange:e=>l(e.target.value),placeholder:"Enter NIC to auto-fill",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${m?"pr-10":""}`}),m&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter NIC to auto-fill center, group, and customer"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Center *"}),(0,s.jsxs)("select",{value:e.center,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[(0,s.jsx)("option",{value:"",children:"Choose a center"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.center_name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Group *"}),(0,s.jsxs)("select",{value:e.group,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:!e.center,children:[(0,s.jsx)("option",{value:"",children:"Choose a group"}),r.map(e=>(0,s.jsx)("option",{value:e.id,children:e.group_name},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Customer *"}),(0,s.jsxs)("select",{value:e.customer,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:!e.group,children:[(0,s.jsx)("option",{value:"",children:"Choose a customer"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.displayName},e.id))]})]}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-blue-900 font-medium mb-2",children:"Customer Profile"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 text-sm text-blue-900",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Customer:"}),(0,s.jsx)("p",{className:"font-medium",children:n.displayName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"NIC:"}),(0,s.jsx)("p",{className:"font-medium",children:n.nic})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Center / Group:"}),(0,s.jsxs)("p",{className:"font-medium",children:[n.center," / ",n.group]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Status:"}),(0,s.jsx)("p",{className:"font-medium",children:n.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Previous Loans:"}),(0,s.jsx)("p",{className:"font-medium",children:n.previousLoans})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guardian Information"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Guardian NIC *"}),(0,s.jsx)("input",{type:"text",value:e.guardian_nic,onChange:e=>l(e.target.value,!0),placeholder:"Enter Guardian NIC",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${e.guardian_nic&&!(0,j.isValidNIC)(e.guardian_nic)?"border-red-500 bg-red-50":e.guardian_nic&&"Male"!==(0,j.extractGenderFromNIC)(e.guardian_nic)?"border-orange-500 bg-orange-50":"border-gray-300"}`,required:!0}),e.guardian_nic&&!(0,j.isValidNIC)(e.guardian_nic)&&(0,s.jsx)("p",{className:"text-[10px] text-red-500 font-bold mt-1 uppercase tracking-wider",children:"Invalid NIC Format"}),e.guardian_nic&&(0,j.isValidNIC)(e.guardian_nic)&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mt-1.5",children:[(0,s.jsxs)("div",{className:`px-2 py-0.5 rounded text-[9px] font-black uppercase tracking-widest ${"Male"===(0,j.extractGenderFromNIC)(e.guardian_nic)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:["Gender: ",(0,j.extractGenderFromNIC)(e.guardian_nic)]}),"Male"!==(0,j.extractGenderFromNIC)(e.guardian_nic)&&(0,s.jsx)("p",{className:"text-[10px] text-red-600 font-bold",children:"Guardian must be Male"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Guardian Name *"}),(0,s.jsx)("input",{type:"text",value:e.guardian_name,onChange:e=>c("guardian_name",e.target.value),placeholder:"Enter Guardian Name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Guardian Address *"}),(0,s.jsx)("textarea",{value:e.guardian_address,onChange:e=>c("guardian_address",e.target.value),placeholder:"Enter Guardian Address",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Guardian Phone *"}),(0,s.jsx)("input",{type:"text",value:e.guardian_phone,onChange:e=>c("guardian_phone",e.target.value),placeholder:"Enter Guardian Phone Number",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${e.guardian_phone&&!/^\d{10}$/.test(e.guardian_phone)?"border-red-500 bg-red-50":"border-gray-300"}`,required:!0}),e.guardian_phone&&!/^\d{10}$/.test(e.guardian_phone)&&(0,s.jsx)("p",{className:"text-[10px] text-red-500 font-bold mt-1 uppercase tracking-wider",children:"Must be 10 digits"})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guarantor Information"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Guarantor 01 (Auto-filled)"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:e.guarantor1_name,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"NIC"}),(0,s.jsx)("input",{type:"text",value:e.guarantor1_nic,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg space-y-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Guarantor 02 (Auto-filled)"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:e.guarantor2_name,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"NIC"}),(0,s.jsx)("input",{type:"text",value:e.guarantor2_nic,readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-sm"})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Witness Information"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Witness 01 (Staff) *"}),(0,s.jsxs)("select",{value:e.witness1_id,onChange:e=>c("witness1_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Witness 01"}),u.filter(s=>s.staff_id!==e.witness2_id).map(e=>(0,s.jsx)("option",{value:e.staff_id,children:e.full_name},e.staff_id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Witness 02 (Staff) *"}),(0,s.jsxs)("select",{value:e.witness2_id,onChange:e=>c("witness2_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Witness 02"}),u.filter(s=>s.staff_id!==e.witness1_id).map(e=>(0,s.jsx)("option",{value:e.staff_id,children:e.full_name},e.staff_id))]})]})]})]})]})]}),F=({formData:e,loanProducts:a,onFieldChange:r,customerActiveLoans:t=[]})=>{let n=a.find(s=>s.id===Number(e.loanProduct)),l=t.includes(Number(e.loanProduct));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loan Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Loan Product *"}),(0,s.jsxs)("select",{value:e.loanProduct,onChange:e=>r("loanProduct",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[(0,s.jsx)("option",{value:"",children:"Choose a product"}),a.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.product_name," ",t.includes(e.id)?"(Already Active)":""]},e.id))]}),l&&n&&(0,s.jsxs)("p",{className:"text-sm font-bold text-red-600 mt-2 animate-pulse",children:["Wait! This customer already has an active ",n.product_name," loan."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Requested Amount (LKR) *"}),(0,s.jsx)("input",{type:"number",value:e.requestedAmount,onChange:e=>r("requestedAmount",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter amount"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Approved Amount (LKR) *"}),(0,s.jsx)("input",{type:"number",value:e.loanAmount,onChange:e=>r("loanAmount",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter approved amount"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["System maximum: LKR ",5e5.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Interest Rate (%) *"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:e.interestRate,onChange:e=>r("interestRate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"e.g., 12.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Rental Type *"}),(0,s.jsx)("select",{value:e.rentalType,onChange:e=>r("rentalType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:b.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Tenure (months) *"}),(0,s.jsx)("input",{type:"number",value:e.tenure,onChange:e=>r("tenure",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter tenure"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Fees & Charges"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Processing Fee (LKR)"}),(0,s.jsx)("input",{type:"number",value:e.processingFee,onChange:e=>r("processingFee",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Documentation Fee (LKR)"}),(0,s.jsx)("input",{type:"number",value:e.documentationFee,onChange:e=>r("documentationFee",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Insurance Fee (LKR)"}),(0,s.jsx)("input",{type:"number",value:e.insuranceFee,onChange:e=>r("insuranceFee",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Remarks"}),(0,s.jsx)("textarea",{value:e.remarks,onChange:e=>r("remarks",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm",placeholder:"Enter any additional remarks..."})]})]})};var I=e.i(63209);let P=()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Documents"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:f.map(e=>(0,s.jsxs)("div",{className:"border border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-blue-400 transition-colors cursor-pointer",children:[(0,s.jsx)(i.Upload,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Click to upload or drag and drop"})]},e))}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(I.AlertCircle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-yellow-900",children:"Document Guidelines"}),(0,s.jsxs)("ul",{className:"text-xs text-yellow-800 mt-2 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"All documents must be clear and legible"}),(0,s.jsx)("li",{children:"Accepted formats: PDF, JPG, PNG (Max 5MB per file)"}),(0,s.jsx)("li",{children:"Customer photo must be recent (within 3 months)"})]})]})]})})]}),G=({formData:e,selectedCustomerRecord:a,staffs:r})=>{let t=(0,j.calculateTotalFees)(e),n=(0,j.calculateNetDisbursement)(e),l=e=>{let s=r.find(s=>s.staff_id===e);return s?s.full_name:e||"Not selected"};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review & Submit"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Customer Information"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Center:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.center||"Not selected"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Group:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.group||"Not selected"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"NIC:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.nic||"Not provided"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Customer:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:a?.displayName||"Not selected"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Loan Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Requested Amount:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,j.formatCurrency)(Number(e.requestedAmount||0))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Approved Amount:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,j.formatCurrency)(Number(e.loanAmount||0))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Interest Rate:"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:[e.interestRate||"0","%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tenure:"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:[e.tenure||"0"," months"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Fees & Charges"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Processing Fee:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,j.formatCurrency)(Number(e.processingFee||0))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Documentation Fee:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,j.formatCurrency)(Number(e.documentationFee||0))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Insurance Fee:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,j.formatCurrency)(Number(e.insuranceFee||0))})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Total Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"Loan Amount:"}),(0,s.jsx)("span",{className:"font-medium text-blue-900",children:(0,j.formatCurrency)(Number(e.loanAmount||0))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"Total Fees:"}),(0,s.jsx)("span",{className:"font-medium text-blue-900",children:(0,j.formatCurrency)(t)})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-2 border-t border-blue-300",children:[(0,s.jsx)("span",{className:"text-blue-700 font-semibold",children:"Net Disbursement:"}),(0,s.jsx)("span",{className:"font-bold text-blue-900",children:(0,j.formatCurrency)(n)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 col-span-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Guarantors & Witnesses"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Guarantor 01:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guarantor1_name||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Guarantor 02:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guarantor2_name||"N/A"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Witness 01 (Staff):"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:l(e.witness1_id)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Witness 02 (Staff):"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:l(e.witness2_id)})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 col-span-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Guardian Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guardian_name||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"NIC:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guardian_nic||"N/A"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guardian_phone||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-start gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Address:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.guardian_address||"N/A"})]})]})]})]})]}),(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(C.CheckCircle,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-900",children:"Ready to Submit"}),(0,s.jsx)("p",{className:"text-xs text-green-800 mt-1",children:"Please review all information carefully. Once submitted, the loan application will be sent for approval."})]})]})})]})};var D=e.i(18566);function L(){let[e,b]=(0,a.useState)(1),[f,v]=(0,a.useState)(!1),{formData:_,isDirty:C,setIsDirty:I,centers:L,groups:q,loanProducts:R,staffs:E,filteredCustomers:T,selectedCustomerRecord:W,handleNicChange:O,handleCustomerChange:$,handleCenterChange:U,handleGroupChange:M,updateFormField:V,loadFormData:K,loadFromLoan:B,isAutoFilling:J,customerActiveLoans:z}=(()=>{let[e,s]=(0,a.useState)(p),[r,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),[i,h]=(0,a.useState)([]),[b,f]=(0,a.useState)([]),[j,N]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[_,C]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[k,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let[e,s,a]=await Promise.all([d.centerService.getCenters().catch(()=>[]),m.loanProductService.getLoanProducts().catch(()=>[]),x.staffService.getWitnessCandidates().catch(()=>[])]);h(e||[]),v(s||[]);let r=g.authService.getCurrentUser(),t=a.filter(e=>!!e.staff_id&&!(r?.user_name&&e.staff_id===r.user_name||r?.email&&e.email_id===r.email));S(t)}catch(e){console.error("Failed to load initial data",e)}})()},[]),(0,a.useEffect)(()=>{(async()=>{if(e.center)try{let s=(await c.groupService.getGroups()).filter(s=>s.center_id.toString()===e.center);f(s)}catch(e){console.error("Failed to load groups",e),f([])}else f([])})()},[e.center]),(0,a.useEffect)(()=>{(async()=>{if(e.group)try{let s=(await u.customerService.getCustomers({grp_id:e.group})).map(s=>({id:s.id.toString(),name:s.full_name,displayName:`${s.full_name} - ${s.customer_code}`,nic:s.customer_code||"",center:e.center,group:e.group,status:s.status||"Active",previousLoans:"N/A"}));N(s)}catch(e){console.error("Failed to load customers",e),N([])}else N([])})()},[e.group,e.center]),(0,a.useEffect)(()=>{if(e.customer){let a=j.find(s=>s.id===e.customer);if(A(a||null),a){u.customerService.getCustomer(a.id).then(e=>{e&&e.loans&&C(e.loans.filter(e=>!o.LOAN_CLOSED_STATUSES.includes(e.status)).map(e=>e.product_id))}).catch(e=>console.error("Failed to fetch customer loan history",e));let e=j.filter(e=>e.id!==a.id);e.length>=2?s(s=>({...s,guarantor1_name:e[0].name,guarantor1_nic:e[0].nic,guarantor2_name:e[1].name,guarantor2_nic:e[1].nic})):1===e.length&&s(s=>({...s,guarantor1_name:e[0].name,guarantor1_nic:e[0].nic,guarantor2_name:"",guarantor2_nic:""}))}}else A(null),s(e=>({...e,guarantor1_name:"",guarantor1_nic:"",guarantor2_name:"",guarantor2_nic:""}))},[e.customer,j]);let F=(0,a.useCallback)(async(e,a=!1)=>{let r=e.trim();a?s(e=>({...e,guardian_nic:r})):s(e=>({...e,nic:r})),t(!0)},[]);(0,a.useEffect)(()=>{let a=setTimeout(async()=>{let a=e.nic?.trim().toUpperCase();if(a&&!(a.length<9))try{l(!0);let e=await u.customerService.getCustomers({customer_code:a}),r=e.find(e=>e.customer_code.toUpperCase()===a)||(1===e.length?e[0]:null);r&&s(e=>({...e,center:r.center_id?.toString()||e.center,group:r.grp_id?.toString()||e.group,customer:r.id.toString(),nic:r.customer_code}))}catch(e){console.error("NIC auto-fill search failed",e)}finally{l(!1)}},300);return()=>clearTimeout(a)},[e.nic]);let I=(0,a.useCallback)(e=>{s(s=>({...s,customer:e})),t(!0)},[]),P=(0,a.useCallback)(e=>{s(s=>({...s,center:e,group:"",customer:""})),t(!0)},[]),G=(0,a.useCallback)(e=>{s(s=>({...s,group:e,customer:""})),t(!0)},[]),D=(0,a.useCallback)((e,a)=>{s(s=>{let r={...s,[e]:a};if("loanProduct"===e){let e=y.find(e=>e.id.toString()===a);e&&(r.interestRate=e.interest_rate.toString(),r.loanAmount=e.loan_amount.toString(),r.requestedAmount=e.loan_amount.toString(),r.tenure=e.loan_term.toString(),r.rentalType=e.term_type||"Weekly")}return r}),t(!0)},[y]),L=(0,a.useCallback)(e=>{s(e),t(!1)},[]),q=(0,a.useCallback)(e=>{s({center:e.center?.id.toString()||"",group:e.group_id?.toString()||"",customer:e.customer_id.toString(),nic:e.customer?.customer_code||"",loanProduct:e.product_id?.toString()||"",loanAmount:e.approved_amount.toString(),requestedAmount:e.request_amount?.toString()||e.approved_amount.toString(),interestRate:e.interest_rate.toString(),rentalType:e.product?.term_type||"Weekly",tenure:e.terms.toString(),processingFee:e.service_charge?.toString()||"",documentationFee:e.document_charge?.toString()||"",insuranceFee:"",remarks:e.loan_step||"",status:"draft",guardian_nic:e.guardian_nic||"",guardian_name:e.guardian_name||"",guardian_address:e.guardian_address||"",guardian_phone:e.guardian_phone||"",guarantor1_name:e.g1_details?.name||"",guarantor1_nic:e.g1_details?.nic||"",guarantor2_name:e.g2_details?.name||"",guarantor2_nic:e.g2_details?.nic||"",witness1_id:e.w1_details?.staff_id||"",witness2_id:e.w2_details?.staff_id||""}),t(!1)},[]);return{formData:e,isDirty:r,setIsDirty:t,centers:i,groups:b,loanProducts:y,staffs:w,filteredCustomers:j,selectedCustomerRecord:k,handleNicChange:F,handleCustomerChange:I,handleCenterChange:P,handleGroupChange:G,updateFormField:D,loadFormData:L,loadFromLoan:q,isAutoFilling:n,customerActiveLoans:_}})(),H=(0,D.useSearchParams)().get("edit");(0,a.useEffect)(()=>{H&&(async()=>{try{let e=await N.loanService.getLoanById(H);B(e),I(!1)}catch(e){console.error("Failed to load loan for editing:",e)}})()},[H,B,I]),(0,a.useEffect)(()=>{let e=e=>{C&&!f&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[C,f]);let Q=(0,a.useCallback)((e,s)=>{K(e),b(s),I(!1)},[K,I]),{drafts:X,isDraftModalOpen:Y,setIsDraftModalOpen:Z,loadedDraftId:ee,saveDraft:es,loadDraft:ea,deleteDraft:er}=((e,s,r,t)=>{let[n,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem(h);if(e)try{let s=JSON.parse(e);Array.isArray(s)&&l(s)}catch(e){console.error("Failed to load draft list",e)}},[t]);let u=(0,a.useCallback)(()=>{let a={formData:{...e,status:"draft"},currentStep:s},t=r||(0,j.generateDraftName)(void 0,e.nic,e.customer),n={id:Date.now().toString(),name:t,savedAt:new Date().toISOString(),...a};try{localStorage.setItem("loanCreationDraft",JSON.stringify(a));let e=localStorage.getItem(h),s=e?JSON.parse(e):[],r=[n,...s].slice(0,10);return localStorage.setItem(h,JSON.stringify(r)),l(r),{success:!0,message:"Draft saved successfully"}}catch(e){return console.error("Failed to save draft",e),{success:!1,message:"Could not save draft. Please try again."}}},[e,s,r]),m=(0,a.useCallback)(e=>{let s=n.find(s=>s.id===e);return s?(t&&t(s.formData,s.currentStep||1),c(e),o(!1),{success:!0,message:`Draft "${s.name}" loaded`}):{success:!1,message:"Draft not found"}},[n,t]),x=(0,a.useCallback)(e=>{let s=n.filter(s=>s.id!==e);return l(s),localStorage.setItem(h,JSON.stringify(s)),d===e&&c(null),{success:!0,message:"Draft deleted"}},[n,d]);return{drafts:n,isDraftModalOpen:i,setIsDraftModalOpen:o,loadedDraftId:d,setLoadedDraftId:c,saveDraft:u,loadDraft:m,deleteDraft:x}})(_,e,W?.displayName,Q),et=[{number:1,title:"Select Customer",description:"Choose center, group, and customer",icon:(0,s.jsx)(n.User,{className:"w-4 h-4"})},{number:2,title:"Loan Details",description:"Enter loan amount and terms",icon:(0,s.jsx)(l.DollarSign,{className:"w-4 h-4"})},{number:3,title:"Documents",description:"Upload required documents",icon:(0,s.jsx)(i.Upload,{className:"w-4 h-4"})},{number:4,title:"Review & Submit",description:"Review and submit for approval",icon:(0,s.jsx)(r.FileText,{className:"w-4 h-4"})}],en=()=>_.center?_.group?_.customer?W?_.guardian_nic?(0,j.isValidNIC)(_.guardian_nic)?"Male"!==(0,j.extractGenderFromNIC)(_.guardian_nic)?"Guardian must be a male.":_.guardian_name?_.guardian_address?_.guardian_phone?/^\d{10}$/.test(_.guardian_phone)?_.witness1_id?_.witness2_id?_.witness1_id===_.witness2_id?"Witness 01 and 02 cannot be the same person.":null:"Witness 02 is required.":"Witness 01 is required.":"Guardian Phone must be 10 digits.":"Guardian Phone is required.":"Guardian Address is required.":"Guardian Name is required.":"Invalid Guardian NIC format.":"Guardian NIC is required.":"Invalid Customer selected.":"Please select a Customer.":"Please select a Group.":"Please select a Center.",el=()=>{if(!_.loanProduct)return"Please select a Loan Product.";if(!_.requestedAmount||0>=Number(_.requestedAmount))return"Valid Requested Amount is required.";if(!_.loanAmount||0>=Number(_.loanAmount))return"Valid Approved Amount is required.";if(Number(_.loanAmount)>Number(_.requestedAmount))return"Approved Amount cannot exceed Requested Amount.";if(!_.interestRate||0>Number(_.interestRate))return"Valid Interest Rate is required.";if(!_.tenure||0>=Number(_.tenure))return"Valid Tenure is required.";if(z.includes(Number(_.loanProduct))){let e=R.find(e=>e.id===Number(_.loanProduct));return`Customer already has an active ${e?.product_name||"selected"} loan.`}return _.guarantor1_name&&_.guarantor1_nic?_.guarantor2_name&&_.guarantor2_nic?null:"Guarantor 02 is missing. Ensure the selected group has at least 3 members.":"Guarantor 01 is missing. Ensure the selected group has other active members."},ei=(0,a.useCallback)(s=>{if(s<=e)return void b(s);for(let e=1;e<s;e++){let s=null;if(1===e&&(s=en()),2===e&&(s=el()),s){k.toast.warning(`Wait! Please complete Step ${e} first: ${s}`),b(e);return}}b(s)},[e,_,W]),eo=(0,a.useCallback)(()=>{let s=null;(1===e&&(s=en()),2===e&&(s=el()),s)?k.toast.error(s):e<4&&b(e+1)},[e,_,W]),ed=(0,a.useCallback)(()=>{e>1&&b(e-1)},[e]),ec=(0,a.useCallback)(()=>{let e=es();e.success?(I(!1),k.toast.success(e.message)):k.toast.info(e.message)},[es,I]),eu=(0,a.useCallback)(e=>{let s=ea(e);s.success&&k.toast.success(s.message)},[ea]),em=(0,a.useCallback)(e=>{if(confirm("Are you sure you want to delete this draft? This action cannot be undone.")){let s=er(e);s.success&&k.toast.info(s.message)}},[er]),ex=(0,a.useCallback)(async()=>{let e=en();if(e){k.toast.error(`Step 1: ${e}`),b(1);return}let s=el();if(s){k.toast.error(`Step 2: ${s}`),b(2);return}try{let e={product_id:_.loanProduct,CSU_id:_.center,customer_id:_.customer,group_id:_.group||null,request_amount:Number(_.requestedAmount),approved_amount:Number(_.loanAmount),terms:Number(_.tenure),interest_rate:Number(_.interestRate),loan_step:"New Loan Application",service_charge:Number(_.processingFee||0),document_charge:Number(_.documentationFee||0),guardian_nic:_.guardian_nic,guardian_name:_.guardian_name,guardian_address:_.guardian_address,guardian_phone:_.guardian_phone,guarantor1_name:_.guarantor1_name,guarantor1_nic:_.guarantor1_nic,guarantor2_name:_.guarantor2_name,guarantor2_nic:_.guarantor2_nic,witness1_id:_.witness1_id,witness2_id:_.witness2_id,edit_id:H||void 0};v(!0);let s=await N.loanService.createLoan(e);console.log("Loan created:",s),k.toast.success("Loan application submitted for approval successfully!"),I(!1),ee&&confirm("Loan submitted successfully! Do you want to delete the draft used for this application?")&&er(ee),window.location.href="/loans/approval"}catch(e){v(!1),console.error("Submission failed:",e),k.toast.error("Failed to submit loan: "+(e.message||"Unknown error"))}},[_,ee,er,H,I]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(S,{isOpen:Y,drafts:X,onClose:()=>Z(!1),onLoad:eu,onDelete:em}),(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Loan"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Complete the loan application process"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(r.FileText,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"View Drafts"})]}),(0,s.jsxs)("button",{onClick:ec,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(t,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Save Draft"})]})]})]}),(0,s.jsx)(y.ProgressSteps,{steps:et,currentStep:e,onStepClick:ei}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[1===e&&(0,s.jsx)(A,{formData:_,centers:L,groups:q,filteredCustomers:T,selectedCustomerRecord:W,onNicChange:O,onCenterChange:U,onGroupChange:M,onCustomerChange:$,onFieldChange:V,staffs:E,isAutoFilling:J}),2===e&&(0,s.jsx)(F,{formData:_,loanProducts:R,onFieldChange:V,customerActiveLoans:z}),3===e&&(0,s.jsx)(P,{}),4===e&&(0,s.jsx)(G,{formData:_,selectedCustomerRecord:W,staffs:E})]}),(0,s.jsx)(w,{currentStep:e,totalSteps:4,onNext:eo,onPrevious:ed,onSubmit:ex})]})}function q(){return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)(L,{})})})}e.s(["default",()=>q],75007)}]);