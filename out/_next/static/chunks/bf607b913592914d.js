(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},13477,e=>{"use strict";var t=e.i(64397);let s={credentials:"include"};e.s(["branchService",0,{getBranchesAll:async()=>{let e=await fetch(`${t.API_BASE_URL}/branches/all`,{...s,headers:(0,t.getHeaders)()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranches:async()=>{let e=await fetch(`${t.API_BASE_URL}/branches`,{...s,headers:(0,t.getHeaders)()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranchById:async e=>{let a=await fetch(`${t.API_BASE_URL}/branches/${e}`,{...s,headers:(0,t.getHeaders)()});if(!a.ok)throw Error("Failed to fetch branch details");return(await a.json()).data},createBranch:async e=>{let a=await fetch(`${t.API_BASE_URL}/branches`,{method:"POST",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),r=await a.json();if(!a.ok){if(422===a.status||409===a.status){let e=Error(r.message||"Validation failed");throw e.errors=r.errors,e}throw Error(r.message||"Failed to create branch")}return r.data},updateBranch:async(e,a)=>{let r=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(a)}),l=await r.json();if(!r.ok){if(422===r.status||409===r.status){let e=Error(l.message||"Validation failed");throw e.errors=l.errors,e}throw Error(l.message||"Failed to update branch")}return l.data},deleteBranch:async e=>{let a=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"DELETE",...s,headers:(0,t.getHeaders)()});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to delete branch")},toggleBranchStatus:async(e,a)=>{let r="active"===a.toLowerCase()?"inactive":"active",l=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify({status:r})}),i=await l.json();if(!l.ok){if(422===l.status||409===l.status){let e=Error(i.error||i.message||"Validation failed");throw e.errors=i.errors,e}throw Error(i.error||i.message||"Failed to update status")}return i.data}}])},93845,e=>{"use strict";var t=e.i(64397);let s={getUsers:async(e="admins")=>{try{let s="admins"===e?`${t.API_BASE_URL}/admins`:`${t.API_BASE_URL}/users`,a=await fetch(s,{headers:(0,t.getHeaders)()});if(!a.ok)return[];let r=await a.json(),l=[];return r?.data?.items&&Array.isArray(r.data.items)?l=r.data.items:r?.data&&Array.isArray(r.data)?l=r.data:r?.data?.data&&Array.isArray(r.data.data)?l=r.data.data:Array.isArray(r)&&(l=r),l.map(e=>({id:e.id,name:e.full_name||e.user_name||e.name||e.email,staffId:e.user_name&&/^ST\d+/.test(e.user_name)?e.user_name:void 0,email:e.email,role:e.roles&&e.roles.length>0?e.roles[0].display_name||e.roles[0].name:e.role||"N/A",branch:e.branch?.name||(e.branch_id?"Branch "+e.branch_id:"-"),branchId:e.branch_id||null,status:e.is_active||"Active"===e.status||1===e.status?"Active":"Inactive",is_locked:e.is_locked||!1,locked_until:e.locked_until||null,today_session:e.today_session||null}))}catch(e){return console.error("Error fetching users",e),[]}},getStaffList:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/staffs`,{headers:(0,t.getHeaders)()});if(!e.ok)return[];return(await e.json()).data||[]}catch(e){return console.error("Error fetching staff list",e),[]}},getStaffDropdownList:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/staffs/list`,{headers:(0,t.getHeaders)()});if(!e.ok)return[];return(await e.json()).data||[]}catch(e){return console.error("Error fetching staff dropdown list",e),[]}},getWitnessCandidates:async()=>{try{let e=["manager","field_officer","staff"].map(e=>fetch(`${t.API_BASE_URL}/staffs/by-role/${e}`,{headers:(0,t.getHeaders)()}).then(e=>e.ok?e.json():{data:[]}).catch(()=>({data:[]}))),s=await Promise.all(e),a=[],r=new Set;return s.forEach(e=>{e.data&&Array.isArray(e.data)&&e.data.forEach(e=>{e.staff_id&&!r.has(e.staff_id)&&(r.add(e.staff_id),a.push({staff_id:e.staff_id,full_name:e.full_name||e.name,email_id:e.email_id||""}))})}),a}catch(e){return console.error("Error fetching witness candidates",e),[]}},getPermissions:async()=>[{module:"Dashboard",view:!0,create:!0,edit:!0,delete:!1},{module:"Customers",view:!0,create:!0,edit:!0,delete:!1},{module:"Loans",view:!0,create:!0,edit:!0,delete:!1},{module:"Collections",view:!0,create:!0,edit:!1,delete:!1},{module:"Reports",view:!0,create:!1,edit:!1,delete:!1},{module:"Finance",view:!0,create:!0,edit:!0,delete:!0},{module:"Shareholders",view:!0,create:!0,edit:!0,delete:!0},{module:"System Config",view:!0,create:!0,edit:!0,delete:!0}],createAdmin:async e=>{let s=await fetch(`${t.API_BASE_URL}/admins`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await s.json();if(!s.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to create admin");return a},createUser:async e=>{let a=e.role?.toLowerCase()||"";if(a.includes("admin")||"super_admin"===a)return s.createAdmin(e);if(e.staffDetails){let s=await fetch(`${t.API_BASE_URL}/staffs`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(e.staffDetails)}),a=await s.json();if(!s.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to create staff");return a}let r={user_name:e.name?e.name.replace(/\s+/g,"").toLowerCase()+Math.floor(1e3*Math.random()):e.email.split("@")[0],email:e.email,password:e.password,password_confirmation:e.password,is_active:!0,roles:[parseInt(e.roleId)]},l=await fetch(`${t.API_BASE_URL}/users`,{method:"POST",headers:(0,t.getHeaders)(),body:JSON.stringify(r)}),i=await l.json();if(!l.ok)throw Error(i.errors?Object.values(i.errors).flat().join(", "):i.message||`Failed to create ${a}`);return i},getAllRoles:async()=>{let e=await fetch(`${t.API_BASE_URL}/roles/all`,{headers:(0,t.getHeaders)()});if(!e.ok)throw console.error(`Error fetching roles: ${e.status} ${e.statusText}`),Error(`Failed to fetch roles: ${e.status} ${e.statusText}`);return(await e.json()).data},updateUser:async(e,s)=>{let a=s.role?.toLowerCase()||"";if(s.staffDetails&&s.staffId){let e=await fetch(`${t.API_BASE_URL}/staffs/${s.staffId}`,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(s.staffDetails)}),a=await e.json();if(!e.ok)throw Error(a.errors?Object.values(a.errors).flat().join(", "):a.message||"Failed to update staff");return a}let r=a.includes("admin")||a.includes("super")?`${t.API_BASE_URL}/admins/${e}`:`${t.API_BASE_URL}/users/${e}`,l=await fetch(r,{method:"PUT",headers:(0,t.getHeaders)(),body:JSON.stringify(s)}),i=await l.json();if(!l.ok)throw Error(i.errors?Object.values(i.errors).flat().join(", "):i.message||"Failed to update user");return i},getStaffDetails:async e=>{let s=await fetch(`${t.API_BASE_URL}/staffs/${e}`,{headers:(0,t.getHeaders)()});return s.ok?(await s.json()).data:null},deleteUser:async e=>{let s=await fetch(`${t.API_BASE_URL}/users/${e}`,{method:"DELETE",headers:(0,t.getHeaders)()});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Failed to delete user")}};e.s(["staffService",0,s])},42667,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(7233),r=e.i(55436),l=e.i(63209),i=e.i(69638),n=e.i(3116),c=e.i(64397);let o=async(e,t)=>{try{let s=new URLSearchParams;e&&s.append("search",e),t&&"all"!==t&&s.append("status",t);let a=await fetch(`${c.API_BASE_URL}/complaints?${s.toString()}`,{headers:(0,c.getHeaders)()});if(!a.ok)throw Error("Failed to fetch complaints");let r=await a.json();return{data:r.data.map(e=>({id:e.id.toString(),ticketNo:e.ticket_no,date:new Date(e.created_at).toISOString().split("T")[0],complainant:e.complainant_name,complainantType:e.complainant_type,branch:e.branch_name,category:e.category,subject:e.subject,description:e.description,priority:e.priority,status:e.status,assignedTo:e.assigned_to,resolution:e.resolution})),meta:r.meta}}catch(e){return console.error(e),{data:[],meta:{}}}},d=async e=>{try{let t={complainant_name:e.complainant,complainant_type:e.complainantType,branch_name:e.branch,category:e.category,subject:e.subject,description:e.description,priority:e.priority,assigned_to:e.assignedTo},s=await fetch(`${c.API_BASE_URL}/complaints`,{method:"POST",headers:(0,c.getHeaders)(),body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to create complaint")}let a=(await s.json()).data;return{id:a.id.toString(),ticketNo:a.ticket_no,date:new Date(a.created_at).toISOString().split("T")[0],complainant:a.complainant_name,complainantType:a.complainant_type,branch:a.branch_name,category:a.category,subject:a.subject,description:a.description,priority:a.priority,status:a.status,assignedTo:a.assigned_to,resolution:a.resolution}}catch(e){throw console.error(e),e}},h=async(e,t)=>{try{if(!(await fetch(`${c.API_BASE_URL}/complaints/${e}`,{method:"PUT",headers:(0,c.getHeaders)(),body:JSON.stringify({status:t})})).ok)throw Error("Failed to update status");return!0}catch(e){return console.error(e),!1}};var x=e.i(86536);let u=({status:e})=>(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${(e=>{switch(e){case"Open":return"bg-red-100 text-red-700";case"In Progress":return"bg-blue-100 text-blue-700";case"Resolved":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}})(e)}`,children:[(e=>{switch(e){case"Open":return(0,t.jsx)(l.AlertCircle,{className:"w-4 h-4"});case"In Progress":return(0,t.jsx)(n.Clock,{className:"w-4 h-4"});case"Resolved":case"Closed":return(0,t.jsx)(i.CheckCircle,{className:"w-4 h-4"});default:return null}})(e),e]}),m=({priority:e})=>(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${(e=>{switch(e){case"High":return"bg-red-100 text-red-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}})(e)}`,children:e}),g=({complaints:e,onView:s})=>(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Ticket No"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Complainant"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Branch"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Subject"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Priority"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"text-center px-6 py-3 text-xs text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.ticketNo}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.date}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-900",children:e.complainant}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.complainantType})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.branch}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.subject}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)(m,{priority:e.priority})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)(u,{status:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 text-center",children:(0,t.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-800",children:(0,t.jsx)(x.Eye,{className:"w-5 h-5"})})})]},e.id))})]})})});var p=e.i(13477),y=e.i(93845),f=e.i(70319);let j=["Loan Processing","System Issue","HR Issue","Service Quality","Other"],b=({onClose:e,onSubmit:a})=>{let[r,l]=(0,s.useState)({complainantType:"Customer",complainant:"",branch:"",category:"",priority:"Medium",assignedTo:"",subject:"",description:""}),[i,n]=(0,s.useState)([]),[c,o]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([p.branchService.getBranchesAll(),y.staffService.getStaffDropdownList()]);n(e),o(t)}catch(e){console.error("Failed to load dropdown data",e)}})()},[]),(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-gray-900",children:"New Complaint"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Register a new complaint"})]}),(0,t.jsx)("div",{className:"p-6 space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Complainant Type"}),(0,t.jsxs)("select",{value:r.complainantType,onChange:e=>l({...r,complainantType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{children:"Customer"}),(0,t.jsx)("option",{children:"Staff"}),(0,t.jsx)("option",{children:"Branch"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Complainant Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter name",value:r.complainant,onChange:e=>l({...r,complainant:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Branch"}),(0,t.jsxs)("select",{value:r.branch,onChange:e=>l({...r,branch:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Branch"}),i.map(e=>(0,t.jsx)("option",{value:e.branch_name,children:e.branch_name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),(0,t.jsxs)("select",{value:r.category,onChange:e=>l({...r,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Category"}),j.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Priority"}),(0,t.jsxs)("select",{value:r.priority,onChange:e=>l({...r,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{children:"Low"}),(0,t.jsx)("option",{children:"Medium"}),(0,t.jsx)("option",{children:"High"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Assign To"}),(0,t.jsxs)("select",{value:r.assignedTo,onChange:e=>l({...r,assignedTo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Assignee"}),c.map(e=>(0,t.jsx)("option",{value:e.full_name,children:e.full_name},e.staff_id))]})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),(0,t.jsx)("input",{type:"text",placeholder:"Brief subject of complaint",value:r.subject,onChange:e=>l({...r,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{rows:4,placeholder:"Detailed description of the complaint",value:r.description,onChange:e=>l({...r,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),(0,t.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[(0,t.jsx)("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{r.complainant.trim()&&r.subject.trim()&&r.description.trim()&&r.branch&&r.category?a(r):f.toast.warning("Please fill in all required fields")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Register Complaint"})]})]})})},w=({complaint:e,onClose:s,onStatusChange:a})=>(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-gray-900",children:e.ticketNo}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.subject})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Date"}),(0,t.jsx)("p",{className:"text-gray-900",children:e.date})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,t.jsxs)("select",{value:e.status,onChange:t=>a(e.id,t.target.value),className:`px-2 py-1 rounded text-xs border focus:outline-none ${"Open"===e.status?"bg-red-100 text-red-700":"In Progress"===e.status?"bg-blue-100 text-blue-700":"Resolved"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:[(0,t.jsx)("option",{value:"Open",children:"Open"}),(0,t.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,t.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,t.jsx)("option",{value:"Closed",children:"Closed"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Complainant"}),(0,t.jsxs)("p",{className:"text-gray-900",children:[e.complainant," (",e.complainantType,")"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Branch"}),(0,t.jsx)("p",{className:"text-gray-900",children:e.branch})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Category"}),(0,t.jsx)("p",{className:"text-gray-900",children:e.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Priority"}),(0,t.jsx)(m,{priority:e.priority})]}),e.assignedTo&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Assigned To"}),(0,t.jsx)("p",{className:"text-gray-900",children:e.assignedTo})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:e.description})]}),e.resolution&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Resolution"}),(0,t.jsx)("p",{className:"text-gray-900 bg-green-50 p-3 rounded-lg border border-green-200",children:e.resolution})]})]}),(0,t.jsx)("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})})]})});function v(){let[e,c]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(""),[_,S]=(0,s.useState)("all"),[A,k]=(0,s.useState)({open:0,inProgress:0,resolved:0,closed:0}),C=async()=>{u(!0);let{data:e,meta:t}=await o(v,_);c(e),t&&t.counts&&k({open:t.counts.open,inProgress:t.counts.in_progress,resolved:t.counts.resolved,closed:t.counts.closed}),u(!1)};(0,s.useEffect)(()=>{let e=setTimeout(()=>{C()},300);return()=>clearTimeout(e)},[v,_]);let E=async e=>{try{await d(e)&&(C(),p(!1))}catch(e){f.toast.error("Failed to create complaint")}},P=async(e,t)=>{await h(e,t)&&(c(s=>s.map(s=>s.id===e?{...s,status:t}:s)),y&&y.id===e&&j({...y,status:t}),C())};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-gray-900",children:"Complaints Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Track and resolve customer complaints"})]}),(0,t.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(a.Plus,{className:"w-5 h-5"}),"New Complaint"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l.AlertCircle,{className:"w-5 h-5 text-red-600"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Open"})]}),(0,t.jsx)("p",{className:"text-2xl text-gray-900",children:A.open})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(n.Clock,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),(0,t.jsx)("p",{className:"text-2xl text-gray-900",children:A.inProgress})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5 text-green-600"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Resolved"})]}),(0,t.jsx)("p",{className:"text-2xl text-gray-900",children:A.resolved})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(i.CheckCircle,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Closed"})]}),(0,t.jsx)("p",{className:"text-2xl text-gray-900",children:A.closed})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(r.Search,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),(0,t.jsx)("input",{type:"text",placeholder:"Search complaints...",value:v,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"Open",children:"Open"}),(0,t.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,t.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,t.jsx)("option",{value:"Closed",children:"Closed"})]})]})}),(0,t.jsx)(g,{complaints:e,onView:j}),m&&(0,t.jsx)(b,{onClose:()=>p(!1),onSubmit:E}),y&&(0,t.jsx)(w,{complaint:y,onClose:()=>j(null),onStatusChange:P})]})}function N(){return(0,t.jsx)("div",{className:"p-6 max-w-[1600px] mx-auto",children:(0,t.jsx)(v,{})})}e.s(["default",()=>N],42667)}]);