(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let s=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37727)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},21848,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(7233),a=e.i(61911),l=e.i(12426),n=e.i(25652),d=e.i(17646);function i({shareholders:e}){let t=e.reduce((e,s)=>e+s.total_investment,0);return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(a.Users,{className:"w-5 h-5 text-blue-600"})})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Shareholders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(l.DollarSign,{className:"w-5 h-5 text-purple-600"})})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Investment"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["LKR ",(t/1e6).toFixed(1),"M"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(n.TrendingUp,{className:"w-5 h-5 text-green-600"})})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Available Profit"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"LKR 2.75M"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(d.PieChart,{className:"w-5 h-5 text-orange-600"})})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Distributed YTD"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"LKR 6.0M"})]})]})}function c({shareholders:e,onViewDetails:t}){let r=e.reduce((e,s)=>e+s.total_investment,0),a=e.reduce((e,s)=>e+s.shares,0);return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Shareholder List"}),(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Calculate Profit Distribution"})]}),(0,s.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 text-xs font-semibold text-gray-600 uppercase",children:[(0,s.jsx)("div",{className:"col-span-3",children:"Shareholder Name"}),(0,s.jsx)("div",{className:"col-span-2",children:"Shares"}),(0,s.jsx)("div",{className:"col-span-2",children:"Percentage"}),(0,s.jsx)("div",{className:"col-span-3",children:"Total Investment"}),(0,s.jsx)("div",{className:"col-span-2",children:"Actions"})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:e.map(e=>(0,s.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"col-span-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm font-semibold",children:e.name.charAt(0)})}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.name})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.shares}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"shares"})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.percentage,"%"]}),(0,s.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.percentage}%`}})})]})}),(0,s.jsxs)("div",{className:"col-span-3",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["LKR ",e.total_investment.toLocaleString()]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Total investment"})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("button",{className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:()=>t(e),children:"View Details"})})]})},e.id))}),(0,s.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"Total"})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsxs)("p",{className:"text-sm font-bold text-gray-900",children:[a," shares"]})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"100%"})}),(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)("p",{className:"text-sm font-bold text-gray-900",children:["LKR ",r.toLocaleString()]})}),(0,s.jsx)("div",{className:"col-span-2"})]})})]})}var o=e.i(37727);function x({show:e,onClose:t,newShareholder:r,setNewShareholder:a,onAdd:l}){return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full shadow-xl",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Add New Shareholder"}),(0,s.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,s.jsx)(o.X,{className:"w-5 h-5 text-gray-500"})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Shareholder Name *"}),(0,s.jsx)("input",{type:"text",value:r.name,onChange:e=>a(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter full name"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Number of Shares *"}),(0,s.jsx)("input",{type:"number",value:r.shares,onChange:e=>a(s=>({...s,shares:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter shares"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Investment (LKR) *"}),(0,s.jsx)("input",{type:"number",value:r.totalInvestment,onChange:e=>a(s=>({...s,totalInvestment:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter amount"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Share Percentage (%) *"}),(0,s.jsx)("input",{type:"number",value:r.percentage,onChange:e=>a(s=>({...s,percentage:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter percentage"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"NIC Number *"}),(0,s.jsx)("input",{type:"text",value:r.nic,onChange:e=>a(s=>({...s,nic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter NIC number"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Contact Number *"}),(0,s.jsx)("input",{type:"tel",value:r.contact,onChange:e=>a(s=>({...s,contact:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"+94 XX XXX XXXX"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Address"}),(0,s.jsx)("textarea",{rows:2,value:r.address,onChange:e=>a(s=>({...s,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm",placeholder:"Enter address"})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200 flex gap-3 justify-end bg-gray-50",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-white transition-colors font-medium text-sm",children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",onClick:l,children:"Add Shareholder"})]})]})}):null}function m({show:e,onClose:t,shareholder:r}){return e&&r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full shadow-xl",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Shareholder Details"}),(0,s.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,s.jsx)(o.X,{className:"w-5 h-5 text-gray-500"})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm font-semibold",children:r.name.charAt(0)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:r.name}),r.nic&&(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["NIC: ",r.nic]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Shares"}),(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[r.shares.toLocaleString()," shares"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Percentage"}),(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[r.percentage,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Total Investment"}),(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:["LKR ",r.total_investment.toLocaleString()]})]}),r.contact&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Contact"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:r.contact})]})]}),r.address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Address"}),(0,s.jsx)("p",{className:"text-gray-900",children:r.address})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 flex justify-end bg-gray-50",children:(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-white transition-colors font-medium text-sm",children:"Close"})})]})}):null}function h(){return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Quick Profit Distribution"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Available Profit (LKR)"}),(0,s.jsx)("input",{type:"number",defaultValue:"2750000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Distribution Date"}),(0,s.jsx)("input",{type:"date",defaultValue:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Distribute Profit"})})]})]})}var u=e.i(64397);let g={async getAll(){let e=await fetch(`${u.API_BASE_URL}/shareholders`,{headers:(0,u.getHeaders)()});if(!e.ok)throw Error("Failed to fetch shareholders");return(await e.json()).data},async getById(e){let s=await fetch(`${u.API_BASE_URL}/shareholders/${e}`,{headers:(0,u.getHeaders)()});if(!s.ok)throw Error("Failed to fetch shareholder");return(await s.json()).data},async create(e){let s=await fetch(`${u.API_BASE_URL}/shareholders`,{method:"POST",headers:(0,u.getHeaders)(),body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).message||"Failed to create shareholder");return(await s.json()).data},async update(e,s){let t=await fetch(`${u.API_BASE_URL}/shareholders/${e}`,{method:"PUT",headers:(0,u.getHeaders)(),body:JSON.stringify(s)});if(!t.ok)throw Error((await t.json()).message||"Failed to update shareholder");return(await t.json()).data},async delete(e){if(!(await fetch(`${u.API_BASE_URL}/shareholders/${e}`,{method:"DELETE",headers:(0,u.getHeaders)()})).ok)throw Error("Failed to delete shareholder")}};var b=e.i(70319);function f(){let[e,a]=(0,t.useState)(!1),[l,n]=(0,t.useState)(!1),[d,o]=(0,t.useState)(null),[u,f]=(0,t.useState)([]),[j,p]=(0,t.useState)(!0),[y,N]=(0,t.useState)({name:"",shares:"",totalInvestment:"",percentage:"",nic:"",contact:"",address:""}),v=async()=>{try{p(!0);let e=await g.getAll();f(e)}catch(e){console.error("Error fetching shareholders:",e),b.toast.error(e.message||"Failed to fetch shareholders")}finally{p(!1)}};(0,t.useEffect)(()=>{v()},[]);let w=async()=>{if(!y.name||!y.shares||!y.totalInvestment||!y.percentage)return void b.toast.warning("Please fill in all required fields");try{let e={name:y.name,shares:Number(y.shares),total_investment:Number(y.totalInvestment),percentage:Number(y.percentage),nic:y.nic||void 0,contact:y.contact||void 0,address:y.address||void 0};await g.create(e),b.toast.success("Shareholder added successfully"),N({name:"",shares:"",totalInvestment:"",percentage:"",nic:"",contact:"",address:""}),a(!1),v()}catch(e){console.error("Error adding shareholder:",e),b.toast.error(e.message||"Failed to add shareholder")}};return j?(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Shareholder Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage shareholders and profit distribution"})]}),(0,s.jsxs)("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[(0,s.jsx)(r.Plus,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Add Shareholder"})]})]}),(0,s.jsx)(i,{shareholders:u}),(0,s.jsx)(c,{shareholders:u,onViewDetails:e=>{o(e),n(!0)}}),(0,s.jsx)(h,{}),(0,s.jsx)(x,{show:e,onClose:()=>a(!1),newShareholder:y,setNewShareholder:N,onAdd:w}),(0,s.jsx)(m,{show:l,onClose:()=>n(!1),shareholder:d})]})}e.s(["ShareholderModule",()=>f],21848)}]);