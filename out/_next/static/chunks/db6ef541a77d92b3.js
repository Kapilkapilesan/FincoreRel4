(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},13477,e=>{"use strict";var t=e.i(64397);let s={credentials:"include"};e.s(["branchService",0,{getBranchesAll:async()=>{let e=await fetch(`${t.API_BASE_URL}/branches/all`,{...s,headers:(0,t.getHeaders)()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranches:async()=>{let e=await fetch(`${t.API_BASE_URL}/branches`,{...s,headers:(0,t.getHeaders)()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranchById:async e=>{let r=await fetch(`${t.API_BASE_URL}/branches/${e}`,{...s,headers:(0,t.getHeaders)()});if(!r.ok)throw Error("Failed to fetch branch details");return(await r.json()).data},createBranch:async e=>{let r=await fetch(`${t.API_BASE_URL}/branches`,{method:"POST",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(e)}),a=await r.json();if(!r.ok){if(422===r.status||409===r.status){let e=Error(a.message||"Validation failed");throw e.errors=a.errors,e}throw Error(a.message||"Failed to create branch")}return a.data},updateBranch:async(e,r)=>{let a=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(r)}),n=await a.json();if(!a.ok){if(422===a.status||409===a.status){let e=Error(n.message||"Validation failed");throw e.errors=n.errors,e}throw Error(n.message||"Failed to update branch")}return n.data},deleteBranch:async e=>{let r=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"DELETE",...s,headers:(0,t.getHeaders)()});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Failed to delete branch")},toggleBranchStatus:async(e,r)=>{let a="active"===r.toLowerCase()?"inactive":"active",n=await fetch(`${t.API_BASE_URL}/branches/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify({status:a})}),l=await n.json();if(!n.ok){if(422===n.status||409===n.status){let e=Error(l.error||l.message||"Validation failed");throw e.errors=l.errors,e}throw Error(l.error||l.message||"Failed to update status")}return l.data}}])},658,e=>{"use strict";var t=e.i(64397);let s={credentials:"include"};async function r(e){let t=e.headers.get("content-type")?.includes("application/json")?await e.json():null;if(!e.ok){if(t&&(422===e.status||409===e.status)){let e=Error(t.error||t.message||"Validation failed");throw e.errors=t.errors,e}let s=t&&(t.error||t.message)||e.statusText;throw Error(`API Error ${e.status}: ${s}`)}return t.data}e.s(["centerService",0,{getCenters:async()=>{try{let e=await fetch(`${t.API_BASE_URL}/centers`,{...s,headers:(0,t.getHeaders)()});return r(e)}catch(e){return console.error("Error fetching centers:",e),[]}},getCenterById:async e=>r(await fetch(`${t.API_BASE_URL}/centers/${e}`,{...s,headers:(0,t.getHeaders)()})),createCenter:async e=>r(await fetch(`${t.API_BASE_URL}/centers`,{method:"POST",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(e)})),updateCenter:async(e,a)=>r(await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify(a)})),deleteCenter:async e=>{let r=await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"DELETE",...s,headers:(0,t.getHeaders)()});if(!r.ok){let e=r.headers.get("content-type")?.includes("application/json")?await r.json():null,t=e&&e.message||r.statusText;throw Error(`Delete failed ${r.status}: ${t}`)}},approveCenter:async e=>r(await fetch(`${t.API_BASE_URL}/centers/${e}/approve`,{method:"PATCH",...s,headers:(0,t.getHeaders)()})),rejectCenter:async(e,r)=>{let a=await fetch(`${t.API_BASE_URL}/centers/${e}/reject`,{method:"POST",...s,headers:(0,t.getHeaders)(),body:JSON.stringify({rejection_reason:r})});if(!a.ok){let e=a.headers.get("content-type")?.includes("application/json")?await a.json():null,t=e&&e.message||a.statusText;throw Error(`Rejection failed ${a.status}: ${t}`)}},toggleCenterStatus:async(e,a)=>{let n="active"===a.toLowerCase()?"disabled":"active";return r(await fetch(`${t.API_BASE_URL}/centers/${e}`,{method:"PUT",...s,headers:(0,t.getHeaders)(),body:JSON.stringify({status:n})}))}}])},23558,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(87316),a=e.i(3116),n=e.i(61911),l=e.i(37727),i=e.i(658),d=e.i(13477),c=e.i(64397);function o(){let[e,o]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[u,f]=(0,s.useState)(""),[y,p]=(0,s.useState)(""),[b,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)(null),[w,S]=(0,s.useState)(()=>{{let e=localStorage.getItem("temporaryAssignments");return e?JSON.parse(e):[]}}),[_,A]=(0,s.useState)({temporaryUser:"",date:"",reason:""}),[U,E]=(0,s.useState)([]),[$,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{k()},[]);let k=async()=>{try{m(!0);let[e,t,s]=await Promise.all([i.centerService.getCenters(),d.branchService.getBranchesAll(),fetch(`${c.API_BASE_URL}/staffs/by-role/field_officer`,{headers:(0,c.getHeaders)(),credentials:"include"}).then(e=>e.ok?e.json():{data:[]})]);o(e||[]),E(t||[]),s?.data&&Array.isArray(s.data)?C(s.data):Array.isArray(s)?C(s):C([])}catch(e){console.error("Error loading meeting scheduling data:",e),g(e.message||"Failed to load data")}finally{m(!1)}},B=e.filter(e=>"rejected"!==e.status&&(!u||String(e.branch_id)===String(u))&&(!y||String(e.staff_id)===String(y)));return h?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-red-600",children:[(0,t.jsx)("p",{children:x}),(0,t.jsx)("button",{onClick:k,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Retry"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"View Meeting Scheduling"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage temporary user assignments for center meetings"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch"}),(0,t.jsxs)("select",{value:u,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Branches"}),U.map(e=>(0,t.jsx)("option",{value:e.id,children:e.branch_name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User"}),(0,t.jsxs)("select",{value:y,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Users"}),$.map(e=>(0,t.jsx)("option",{value:e.staff_id,children:e.full_name},e.staff_id))]})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(e=>(0,t.jsxs)("div",{onClick:()=>{N(e),A({temporaryUser:"",date:new Date().toISOString().split("T")[0],reason:""}),j(!0)},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(n.Users,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status.toUpperCase()})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.center_name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.CSU_id})]}),(0,t.jsxs)("div",{className:"mt-4 border-t border-gray-100 pt-3",children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:"Schedule"}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[e.open_days?.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,t.jsx)(r.Calendar,{className:"w-3.5 h-3.5 text-gray-400"}),(0,t.jsx)("span",{children:e.day})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(a.Clock,{className:"w-3.5 h-3.5 text-gray-400"}),(0,t.jsx)("span",{children:e.time})]})]},s)),(e.open_days?.length||0)>3&&(0,t.jsxs)("p",{className:"text-xs text-center text-gray-400 italic pt-1 mt-1",children:["+",(e.open_days?.length||0)-3," more schedules"]}),(!e.open_days||0===e.open_days.length)&&(0,t.jsx)("p",{className:"text-sm text-gray-400 italic",children:"No schedule set"})]})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.group_count||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Groups"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.totalMembers||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Members"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.totalLoans||0}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Loans"})]})]})})]})]},e.id))}),b&&v&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Temporary User Assignment"}),(0,t.jsx)("button",{onClick:()=>j(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,t.jsx)(l.X,{className:"w-5 h-5 text-gray-500"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Name"}),(0,t.jsx)("p",{className:"text-sm text-gray-900",children:v.center_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Time"}),(0,t.jsx)("p",{className:"text-sm text-gray-900",children:v.open_days?.map(e=>`${e.time} (${e.day})`).join(", ")||"No schedule"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center User"}),(0,t.jsx)("p",{className:"text-sm text-gray-900",children:v.staff_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Location"}),(0,t.jsx)("p",{className:"text-sm text-gray-900",children:v.address})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temporary User *"}),(0,t.jsxs)("select",{value:_.temporaryUser,onChange:e=>A({..._,temporaryUser:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select User"}),$.map(e=>(0,t.jsx)("option",{value:e.full_name,children:e.full_name},e.staff_id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,t.jsx)("input",{type:"date",value:_.date,onChange:e=>A({..._,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),(0,t.jsx)("textarea",{value:_.reason,onChange:e=>A({..._,reason:e.target.value}),rows:3,placeholder:"Reason for temporary assignment (e.g., original user on leave)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 flex gap-3 justify-end bg-gray-50",children:[(0,t.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-white transition-colors font-medium text-sm",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(v&&_.temporaryUser){let e=[...w,{centerId:v.id,originalUser:v.staff_id,temporaryUser:_.temporaryUser,date:_.date,reason:_.reason}];S(e),localStorage.setItem("temporaryAssignments",JSON.stringify(e)),j(!1)}},disabled:!_.temporaryUser||!_.date,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm",children:"Assign User"})]})]})}),w.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Temporary Assignments"}),(0,t.jsx)("div",{className:"space-y-3",children:w.slice(-5).map((s,r)=>{let a=e.find(e=>e.id===s.centerId);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a?.center_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[s.originalUser," â†’ ",s.temporaryUser," on ",s.date]})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:s.reason})]},r)})})]})]})}var h=e.i(42365),m=e.i(18566);function x(){let[e,r]=(0,s.useState)(null),a=(0,m.useRouter)();return((0,s.useEffect)(()=>{h.authService.getCurrentUser();let e=localStorage.getItem("roles"),t=!1;if(e)try{let s=JSON.parse(e);t=Array.isArray(s)&&s.some(e=>["super_admin","admin","manager","staff"].includes(e.name))}catch(e){t=!1}t?r(!0):(r(!1),setTimeout(()=>a.push("/"),3e3))},[a]),null===e)?null:e?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(o,{})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-600",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),(0,t.jsx)("p",{children:"You do not have permission to view this page. Redirecting to dashboard..."})]})}e.s(["default",()=>x],23558)}]);